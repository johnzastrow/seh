# SolarEdge Harvest Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# API Configuration (Required)
# =============================================================================

# SolarEdge API key (required)
# Get your API key from the SolarEdge monitoring portal:
# https://monitoring.solaredge.com/
SEH_API_KEY=your_api_key_here

# Optional: Override the base URL (default: https://monitoringapi.solaredge.com)
# SEH_API_BASE_URL=https://monitoringapi.solaredge.com

# API request timeout in seconds (default: 10)
# SEH_API_TIMEOUT=10

# Maximum concurrent API requests (default: 3)
# Note: SolarEdge limits to 3 concurrent requests
# SEH_API_MAX_CONCURRENT=3

# Maximum API requests per day (default: 300)
# Note: SolarEdge enforces this limit per account
# SEH_API_DAILY_LIMIT=300

# =============================================================================
# Database Configuration
# =============================================================================

# Database connection URL
# Supported formats:
#   SQLite:     sqlite:///./seh.db
#   PostgreSQL: postgresql+psycopg://user:password@localhost:5432/seh
#   MariaDB:    mariadb+mariadbconnector://user:password@localhost:3306/seh
#
# PostgreSQL with specific schema:
#   postgresql+psycopg://user:password@localhost:5432/seh?options=-csearch_path%3Dmy_schema
#   Note: The '=' must be URL-encoded as '%3D'
#
# PostgreSQL examples:
#   Default schema (public):
#     postgresql+psycopg://postgres:mypass@localhost:5432/solaredge
#   Custom schema:
#     postgresql+psycopg://postgres:mypass@localhost:5432/solaredge?options=-csearch_path%3Dseh_data
#   Multiple schemas (first is default for new objects):
#     postgresql+psycopg://postgres:mypass@localhost:5432/solaredge?options=-csearch_path%3Dseh_data,public
#
SEH_DATABASE_URL=sqlite:///./seh.db

# =============================================================================
# Site Filtering (Optional)
# =============================================================================

# Comma-separated list of site IDs to sync
# If not set, syncs all sites accessible with your API key
# SEH_SITE_IDS=123456,789012

# =============================================================================
# Data Type Filtering (Optional)
# =============================================================================

# Comma-separated list of data types to skip during sync
# Use 'seh check-api' to detect unavailable endpoints and auto-configure this
# Valid data types: site, equipment, energy, power, storage, meter,
#                   environmental, alert, inventory, inverter_telemetry, optimizer_telemetry
# SEH_SKIP_DATA_TYPES=meter,alert

# =============================================================================
# Sync Configuration
# =============================================================================

# Number of days to look back for energy data on first sync (default: 365)
SEH_ENERGY_LOOKBACK_DAYS=365

# Number of days to look back for power data on first sync (default: 7)
SEH_POWER_LOOKBACK_DAYS=7

# Overlap buffer in minutes for incremental syncs (default: 15)
# This catches any data that was delayed in reporting
SEH_SYNC_OVERLAP_MINUTES=15

# Power data time unit/granularity (default: QUARTER_OF_AN_HOUR)
# Options: QUARTER_OF_AN_HOUR (15 min), HOUR, DAY, WEEK, MONTH, YEAR
# Note: SolarEdge limits power data to:
#   - QUARTER_OF_AN_HOUR: max 1 month range per request
#   - HOUR: max 1 month range per request
#   - DAY/WEEK/MONTH/YEAR: max 1 year range per request
# SEH_POWER_TIME_UNIT=QUARTER_OF_AN_HOUR

# =============================================================================
# Error Handling Configuration
# =============================================================================

# Error handling mode (default: lenient)
#   strict  - Stop on first error
#   lenient - Log errors and continue with other data types/sites
#   skip    - Silently skip failed operations
# SEH_ERROR_HANDLING=lenient

# Maximum retry attempts for failed API requests (default: 3)
# SEH_MAX_RETRIES=3

# Base delay in seconds between retries (default: 2.0)
# Uses exponential backoff: 2s, 4s, 8s, etc.
# SEH_RETRY_DELAY=2.0

# =============================================================================
# Logging Configuration
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
SEH_LOG_LEVEL=INFO

# Log file path (optional, logs to console if not set)
# Creates parent directories automatically
# SEH_LOG_FILE=./logs/seh.log

# Log rotation settings (only used if SEH_LOG_FILE is set)
# Maximum size per log file (default: 10MB)
SEH_LOG_MAX_BYTES=10485760

# Number of backup log files to keep (default: 5)
SEH_LOG_BACKUP_COUNT=5

# =============================================================================
# Email Notification Configuration (Optional)
# =============================================================================

# Enable email notifications (default: false)
# SEH_SMTP_ENABLED=false

# SMTP server hostname (default: smtp.gmail.com)
# SEH_SMTP_HOST=smtp.gmail.com

# SMTP server port (default: 587)
# Common ports: 587 (TLS/STARTTLS), 465 (SSL), 25 (unencrypted)
# SEH_SMTP_PORT=587

# Use TLS for SMTP connection (default: true)
# Set to false for SSL on port 465
# SEH_SMTP_USE_TLS=true

# SMTP authentication credentials
# SEH_SMTP_USERNAME=your_email@gmail.com
# SEH_SMTP_PASSWORD=your_app_password

# From email address for notifications
# SEH_SMTP_FROM_EMAIL=solaredge@example.com

# Recipient email addresses (comma-separated)
# SEH_SMTP_TO_EMAILS=admin@example.com,alerts@example.com

# Send email on sync errors (default: true)
# SEH_NOTIFY_ON_ERROR=true

# Send email on successful sync (default: false)
# SEH_NOTIFY_ON_SUCCESS=false
