# Context Handoff - 2026-01-02

## Current Project / Plan

ActaLog - CrossFit workout tracker. Mobile-first Vue.js frontend with Go backend. Working on UI improvements and Docker deployment to remote host.

## Current Phase

UI improvements deployed; remote Docker deployment debugged and working.

## Work Completed This Session

- Added Email Settings and Email Logs links to admin section in ProfileView
- Renamed Quick Log "Notes" field to "Quick Entry" with improved placeholder text
- Committed and pushed changes (commit `daf1438`)
- Built and pushed Docker images (`:dev` and `:latest` tags, build-72)
- Debugged Docker deployment on remote host `recipe.fluidgrid.site`:
  - Fixed `host.docker.internal` networking issue with `network_mode: host`
  - Fixed port conflict (8080 in use) by setting `SERVER_PORT=8081`
  - Fixed SQLite vs MySQL issue - image has SQLite defaults baked in, must override with explicit env vars
- Created `/handoff` skill documentation

## Key Files

- `web/src/views/ProfileView.vue` - Added email admin links (lines 500-532)
- `web/src/views/DashboardView.vue` - Quick Entry field rename (lines 436-449)
- `configs/config.go:105` - `SERVER_PORT` env var (not `PORT`)
- `.claude/skills/handoff.md` - Handoff skill documentation

## Decisions Made

- Use `network_mode: host` for Docker deployment when connecting to host MySQL/MariaDB
- Override image default env vars (SQLite) with explicit docker-compose `environment:` section
- Mount `.env` file for non-DB settings (JWT, email config)
- Server runs on port 8081 to avoid conflict with existing service on 8080

## Remote Host Configuration

**Host:** `recipe.fluidgrid.site` (jcz@recipe)
**Path:** `~/actabetadocker/`
**Database:** MariaDB on host, database `actaa`, user `actaa`

**Working docker-compose.yml:**
```yaml
services:
  actalog:
    image: ghcr.io/johnzastrow/actalog:dev
    container_name: actalogbeta
    restart: unless-stopped
    network_mode: host
    environment:
      - SERVER_PORT=8081
      - DB_DRIVER=mysql
      - DB_HOST=127.0.0.1
      - DB_PORT=3306
      - DB_NAME=actaa
      - DB_USER=actaa
      - DB_PASSWORD=BonzoTriangle831^
    volumes:
      - ./.env:/app/.env:ro
      - actalog-uploads:/app/uploadsbeta

volumes:
  actalog-uploads:
```

## Next Steps

1. Continue UI improvements as needed
2. Test email functionality on remote deployment
3. Consider fixing Docker image to not bake in SQLite defaults (or document the override requirement)

## Continuation Prompt

Resume from handoff: .claude/handoffs/handoff-2026-01-02-1045.md
Context: ActaLog workout tracker - UI changes deployed, Docker running on recipe.fluidgrid.site:8081
Next: Continue with any additional UI adjustments or features
